# 堆叠柱状图 - 文字优化设计规范

## 概述

堆叠柱状图用于展示多个系列数据在同一分类下的累计对比，需要同时处理 **X轴标签** 和 **图例文字** 的显示问题。

## 核心配置

```javascript
{
    isStack: true,           // 开启堆叠模式
    seriesField: 'type',     // 分组字段（图例来源）
}
```

## 文字优化策略

### 1. X轴标签处理

与普通柱状图相同，使用智能旋转+截断策略。

### 2. 图例文字处理

| 条件 | 处理方式 | 配置 |
|-----|---------|------|
| 文字 ≤10字符 | 完整显示 | - |
| 文字 >10字符 | 截断+省略号 | `itemName.formatter` |
| 系列 ≥5个 | 图例换行或滚动 | `layout: 'horizontal'` |

### 图例配置代码

```javascript
legend: {
    position: 'top-right',    // 位置
    layout: 'horizontal',     // 布局方向
    itemName: {
        formatter: (text) => {
            return text.length > 10 
                ? text.substring(0, 10) + '...' 
                : text;
        }
    }
}
```

## 配置参数

### 堆叠特有配置

| 参数 | 类型 | 说明 | 推荐值 |
|-----|------|------|-------|
| isStack | boolean | 开启堆叠 | true |
| seriesField | string | 分组字段 | - |

### 图例位置选项

| 位置 | 说明 | 适用场景 |
|-----|------|---------|
| top | 顶部居中 | 多系列 |
| top-left | 顶部左对齐 | - |
| top-right | 顶部右对齐 | 推荐 |
| bottom | 底部居中 | - |
| left | 左侧垂直 | 系列名较长 |
| right | 右侧垂直 | 系列名较长 |

## 颜色规范

### 推荐调色板

```javascript
color: [
    '#5B8FF9',  // 蓝色
    '#5AD8A6',  // 绿色
    '#F6BD16',  // 黄色
    '#E86452',  // 红色
    '#9270CA',  // 紫色
    '#6DC8EC',  // 青色
]
```

## 注意事项

1. **堆叠顺序** - 数据顺序决定堆叠顺序，重要数据放前面
2. **颜色区分度** - 相邻系列颜色应有明显区分
3. **图例与数据对应** - 确保图例颜色与柱子颜色一致
4. **Tooltip信息** - 显示当前系列的具体值和占比

## 相关文档

- [柱状图](../01-柱状图/README.md)
- [水平柱状图](../03-水平柱状图/README.md)
