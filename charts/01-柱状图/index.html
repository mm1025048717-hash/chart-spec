<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>柱状图 - 图表设计规范</title>
    <script src="https://cdn.jsdelivr.net/npm/@antv/g2plot@2.4.31/dist/g2plot.min.js"></script>
    <link rel="stylesheet" href="../common.css">
    <style>
        .chart-type-badge {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: linear-gradient(135deg, #E8F3FF 0%, #D6E8FF 100%);
            padding: 8px 16px;
            border-radius: 20px;
            margin-bottom: 24px;
        }
        .chart-type-badge .icon { font-size: 20px; }
        .chart-type-badge .text { font-size: 14px; color: var(--blue); font-weight: 500; }
        
        .use-case-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 12px;
            margin: 16px 0;
        }
        .use-case-item {
            background: #F7F8FA;
            padding: 12px;
            border-radius: 6px;
            font-size: 13px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .use-case-item::before { content: '✓'; color: var(--green); font-weight: bold; }
        
        .variant-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin: 20px 0;
        }
        @media (max-width: 768px) { .variant-grid { grid-template-columns: 1fr; } }
        
        /* 标注层样式 */
        .annotation-overlay {
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
        }
        .chart-body:hover .annotation-overlay { opacity: 1; }
        
        .dim-marker {
            position: absolute;
            background: var(--red);
            color: white;
            font-size: 9px;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'SF Mono', monospace;
            white-space: nowrap;
            z-index: 100;
        }
        .dim-marker.blue { background: var(--blue); }
        .dim-marker.green { background: var(--green); }
        .dim-marker.yellow { background: var(--yellow); color: #333; }
        .dim-marker.purple { background: var(--purple); }
        
        .dim-line {
            position: absolute;
            background: var(--red);
            z-index: 99;
        }
        .dim-line.horizontal { height: 1px; }
        .dim-line.vertical { width: 1px; }
        .dim-line.blue { background: var(--blue); }
        .dim-line.green { background: var(--green); }
        
        .dim-bracket {
            position: absolute;
            border: 1px solid var(--red);
            border-radius: 2px;
            z-index: 98;
        }
        .dim-bracket.blue { border-color: var(--blue); }
        .dim-bracket.dashed { border-style: dashed; }
        
        .area-highlight {
            position: absolute;
            border: 2px dashed;
            border-radius: 4px;
            z-index: 97;
        }
        .area-highlight.padding { border-color: rgba(91, 143, 249, 0.5); background: rgba(91, 143, 249, 0.05); }
        .area-highlight.chart { border-color: rgba(90, 216, 166, 0.5); background: rgba(90, 216, 166, 0.05); }
        .area-highlight.xaxis { border-color: rgba(246, 189, 22, 0.5); background: rgba(246, 189, 22, 0.05); }
        .area-highlight.yaxis { border-color: rgba(232, 100, 82, 0.5); background: rgba(232, 100, 82, 0.05); }
        .area-highlight.legend { border-color: rgba(146, 112, 202, 0.5); background: rgba(146, 112, 202, 0.05); }
        
        .hover-tip {
            position: absolute;
            top: 8px; right: 8px;
            font-size: 11px;
            color: var(--blue);
            background: rgba(91, 143, 249, 0.1);
            padding: 4px 12px;
            border-radius: 12px;
            z-index: 50;
        }
        .chart-body:hover .hover-tip { opacity: 0; }
    </style>
</head>
<body>

<div class="page-header">
    <div class="chart-type-badge">
        <span class="icon">📊</span>
        <span class="text">基础图表</span>
    </div>
    <h1>柱状图</h1>
    <p class="subtitle">用于比较不同类别之间的数值大小，是最常用的数据可视化图表</p>
    <div class="tech-stack">
        <span class="tech-tag">@ant-design/charts</span>
        <span class="tech-tag">Column</span>
        <span class="tech-tag">分类对比</span>
    </div>
</div>

<!-- 适用场景 -->
<div class="spec-section">
    <div class="spec-title">适用场景</div>
    <div class="use-case-grid">
        <div class="use-case-item">各地区销售额对比</div>
        <div class="use-case-item">月度/季度数据对比</div>
        <div class="use-case-item">产品销量排行</div>
        <div class="use-case-item">部门业绩对比</div>
        <div class="use-case-item">年度趋势对比</div>
        <div class="use-case-item">预算vs实际对比</div>
    </div>
</div>

<!-- 带标注的主图表 -->
<div class="chart-container">
    <div class="chart-card">
        <div class="chart-card-header">
            <span class="chart-title">区域销售额对比（带完整标注）</span>
            <span class="chart-tag blue">Annotated</span>
        </div>
        <!-- 图表元信息 -->
        <div class="chart-meta">
            <div class="chart-meta-title">各区域销售额对比</div>
            <div class="chart-meta-info">
                <span class="chart-meta-item"><span class="dot"></span>单位：万元</span>
                <span class="chart-meta-item"><span class="dot" style="background: var(--green);"></span>数据周期：2024年Q4</span>
            </div>
        </div>
        <div class="chart-body lg" style="position: relative;">
            <!-- 轴单位标签 -->
            <div class="axis-unit y-left">万元</div>
            
            <!-- 自定义图例 -->
            <div class="custom-legend">
                <div class="legend-item">
                    <span class="legend-icon-square" style="background: #5B8FF9;"></span>
                    <span class="legend-text">销售额</span>
                </div>
            </div>
            
            <!-- X轴字段标签 -->
            <div class="x-field-label">区域</div>
            
            <!-- 图表 -->
            <div id="chart-annotated" style="width: 100%; height: 100%;"></div>
            
            <!-- 标注层 -->
            <div class="annotation-overlay">
                <!-- 容器内边距标注 -->
                <div class="area-highlight padding" style="top: 0; left: 0; right: 0; bottom: 0;"></div>
                <div class="dim-marker blue" style="top: 4px; left: 50%; transform: translateX(-50%);">padding: 20px</div>
                
                <!-- 图表区域 -->
                <div class="area-highlight chart" style="top: 40px; left: 60px; right: 40px; bottom: 60px;"></div>
                
                <!-- 柱体宽度标注 -->
                <div class="dim-marker green" style="bottom: 100px; left: 120px;">columnWidthRatio: 0.5</div>
                
                <!-- 圆角标注 -->
                <div class="dim-marker purple" style="bottom: 180px; left: 200px;">radius: [4,4,0,0]</div>
                
                <!-- X轴区域 -->
                <div class="area-highlight xaxis" style="bottom: 20px; left: 60px; right: 40px; height: 40px;"></div>
                <div class="dim-marker yellow" style="bottom: 25px; right: 50px;">X轴: fontSize 11px</div>
                
                <!-- Y轴区域 -->
                <div class="area-highlight yaxis" style="top: 40px; left: 20px; width: 40px; bottom: 60px;"></div>
                <div class="dim-marker" style="top: 50%; left: 4px; transform: translateY(-50%);">Y轴</div>
                
                <!-- 图例区域 -->
                <div class="area-highlight legend" style="top: 45px; right: 45px; width: 100px; height: 30px;"></div>
                <div class="dim-marker purple" style="top: 50px; right: 150px;">Legend</div>
                
                <!-- 数据标签标注 -->
                <div class="dim-marker blue" style="top: 120px; right: 180px;">label: 11px</div>
            </div>
        </div>
        <!-- 汇总栏 -->
        <div class="chart-summary">
            总计：<span class="summary-item"><span class="summary-label">销售额</span><span class="summary-value blue">16,050万元</span></span>，<span class="summary-item"><span class="summary-label">平均</span><span class="summary-value">2,675万元</span></span>
        </div>
    </div>
</div>

<!-- 尺寸与间距规范 -->
<div class="spec-section">
    <div class="spec-title">尺寸与间距规范</div>
    <table class="spec-table">
        <thead>
            <tr>
                <th style="width: 180px;">元素</th>
                <th style="width: 150px;">值</th>
                <th>说明</th>
            </tr>
        </thead>
        <tbody>
            <tr class="highlight">
                <td>图表容器高度</td>
                <td><code>400px</code> (MD)</td>
                <td>标准高度，可选 SM(300) / LG(500) / XL(600)</td>
            </tr>
            <tr>
                <td>容器内边距</td>
                <td><code>20px</code></td>
                <td>chart-body 的 padding</td>
            </tr>
            <tr>
                <td>G2Plot padding</td>
                <td><code>[40, 40, 60, 60]</code></td>
                <td>[上, 右, 下, 左] 为轴标签留空间</td>
            </tr>
            <tr>
                <td>柱体宽度比</td>
                <td><code>0.5</code></td>
                <td>columnWidthRatio: 占分类宽度的50%</td>
            </tr>
            <tr>
                <td>分组间距比</td>
                <td><code>0.25</code></td>
                <td>marginRatio: 分组柱状图间的间距</td>
            </tr>
            <tr>
                <td>柱体圆角</td>
                <td><code>[4, 4, 0, 0]</code></td>
                <td>[左上, 右上, 右下, 左下] 仅顶部圆角</td>
            </tr>
        </tbody>
    </table>
</div>

<!-- 坐标轴规范 -->
<div class="spec-section">
    <div class="spec-title">坐标轴规范</div>
    <table class="spec-table">
        <thead>
            <tr>
                <th style="width: 180px;">参数</th>
                <th style="width: 150px;">X轴</th>
                <th style="width: 150px;">Y轴</th>
                <th>说明</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>标签字号</td>
                <td><code>11px</code></td>
                <td><code>11px</code></td>
                <td>统一字号</td>
            </tr>
            <tr>
                <td>标签颜色</td>
                <td><code>#646A73</code></td>
                <td><code>#646A73</code></td>
                <td>次级文字色</td>
            </tr>
            <tr>
                <td>轴线颜色</td>
                <td><code>#E5E6EB</code></td>
                <td><code>隐藏</code></td>
                <td>Y轴无轴线</td>
            </tr>
            <tr>
                <td>网格线</td>
                <td><code>无</code></td>
                <td><code>#E5E6EB</code></td>
                <td>虚线 [4, 4]</td>
            </tr>
            <tr class="highlight">
                <td>旋转角度</td>
                <td><code>0° / -45° / -90°</code></td>
                <td>-</td>
                <td>根据文字长度选择</td>
            </tr>
            <tr>
                <td>textAlign (旋转时)</td>
                <td><code>'end'</code></td>
                <td>-</td>
                <td>旋转标签右对齐</td>
            </tr>
        </tbody>
    </table>
</div>

<!-- 颜色与样式 -->
<div class="spec-section">
    <div class="spec-title">颜色与样式规范</div>
    <table class="spec-table">
        <thead>
            <tr>
                <th style="width: 150px;">元素</th>
                <th style="width: 150px;">值</th>
                <th>说明</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>柱体主色</td>
                <td><code>#5B8FF9</code></td>
                <td>单系列默认蓝色</td>
            </tr>
            <tr>
                <td>数据标签色</td>
                <td>与柱体同色</td>
                <td>保持视觉一致</td>
            </tr>
            <tr>
                <td>数据标签字号</td>
                <td><code>11px</code></td>
                <td>position: 'top'</td>
            </tr>
            <tr>
                <td>多系列色板</td>
                <td colspan="2">
                    <code style="background:#5B8FF9;color:#fff;margin-right:4px;">#5B8FF9</code>
                    <code style="background:#5AD8A6;color:#fff;margin-right:4px;">#5AD8A6</code>
                    <code style="background:#F6BD16;color:#333;margin-right:4px;">#F6BD16</code>
                    <code style="background:#E86452;color:#fff;margin-right:4px;">#E86452</code>
                    <code style="background:#9270CA;color:#fff;">#9270CA</code>
                </td>
            </tr>
        </tbody>
    </table>
</div>

<!-- 图例规范 -->
<div class="spec-section">
    <div class="spec-title">图例规范</div>
    <table class="spec-table">
        <thead>
            <tr>
                <th style="width: 150px;">参数</th>
                <th style="width: 150px;">值</th>
                <th>说明</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>位置</td>
                <td><code>'top-right'</code></td>
                <td>右上角</td>
            </tr>
            <tr>
                <td>项间距</td>
                <td><code>16px</code></td>
                <td>itemSpacing</td>
            </tr>
            <tr>
                <td>图标形状</td>
                <td><code>'square'</code></td>
                <td>柱状图用方形</td>
            </tr>
            <tr>
                <td>图标尺寸</td>
                <td><code>10×10px</code></td>
                <td>r: 5</td>
            </tr>
            <tr>
                <td>文字字号</td>
                <td><code>12px</code></td>
                <td>颜色 #1F2329</td>
            </tr>
        </tbody>
    </table>
</div>

<!-- 完整代码示例 -->
<div class="spec-section">
    <div class="spec-title">完整配置代码</div>
    <div class="code-block">
<span class="keyword">import</span> { Column } <span class="keyword">from</span> <span class="string">'@ant-design/charts'</span>;

<span class="keyword">const</span> data = [
    { region: <span class="string">'华东'</span>, value: <span class="number">3650</span> },
    { region: <span class="string">'华北'</span>, value: <span class="number">2808</span> },
    <span class="comment">// ...</span>
];

<span class="keyword">const</span> config = {
    data,
    xField: <span class="string">'region'</span>,
    yField: <span class="string">'value'</span>,
    
    <span class="comment">// 颜色与样式</span>
    color: <span class="string">'#5B8FF9'</span>,
    columnWidthRatio: <span class="number">0.5</span>,
    columnStyle: { radius: [<span class="number">4</span>, <span class="number">4</span>, <span class="number">0</span>, <span class="number">0</span>] },
    
    <span class="comment">// 内边距</span>
    padding: <span class="string">'auto'</span>,
    appendPadding: [<span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>],
    
    <span class="comment">// X轴配置</span>
    xAxis: {
        label: {
            autoRotate: <span class="keyword">false</span>,
            rotate: <span class="number">0</span>,
            style: { fontSize: <span class="number">11</span>, fill: <span class="string">'#646A73'</span>, textAlign: <span class="string">'center'</span> },
        },
        line: { style: { stroke: <span class="string">'#E5E6EB'</span> } },
        tickLine: <span class="keyword">null</span>,
    },
    
    <span class="comment">// Y轴配置</span>
    yAxis: {
        label: {
            style: { fontSize: <span class="number">11</span>, fill: <span class="string">'#646A73'</span> },
            formatter: (v) => v.toLocaleString(),
        },
        grid: { line: { style: { stroke: <span class="string">'#E5E6EB'</span>, lineDash: [<span class="number">4</span>, <span class="number">4</span>] } } },
        line: <span class="keyword">null</span>,
    },
    
    <span class="comment">// 数据标签</span>
    label: {
        position: <span class="string">'top'</span>,
        style: { fontSize: <span class="number">11</span>, fill: <span class="string">'#5B8FF9'</span> },
        formatter: (datum) => datum.value.toLocaleString(),
    },
    
    <span class="comment">// 交互</span>
    interactions: [{ type: <span class="string">'element-active'</span> }],
};

<span class="keyword">return</span> &lt;Column {...config} /&gt;;
    </div>
</div>

<!-- 变体展示 -->
<div class="spec-section">
    <div class="spec-title">常见变体</div>
    <div class="variant-grid">
        <div class="chart-card">
            <div class="chart-card-header">
                <span class="chart-title">带数据标签</span>
                <span class="chart-tag green">With Label</span>
            </div>
            <div class="chart-body sm">
                <div id="chart-label" style="width: 100%; height: 100%;"></div>
            </div>
        </div>
        <div class="chart-card">
            <div class="chart-card-header">
                <span class="chart-title">分组柱状图</span>
                <span class="chart-tag yellow">Grouped</span>
            </div>
            <div class="chart-body sm">
                <div id="chart-grouped" style="width: 100%; height: 100%;"></div>
            </div>
        </div>
    </div>
</div>

<script>
const { Column } = G2Plot;

// 基础数据
const basicData = [
    { region: '华东', value: 3650 },
    { region: '华北', value: 2808 },
    { region: '华南', value: 2408 },
    { region: '华中', value: 2236 },
    { region: '西北', value: 2300 },
    { region: '西南', value: 2648 },
];

// 带标注的主图表
new Column('chart-annotated', {
    data: basicData,
    xField: 'region',
    yField: 'value',
    color: '#5B8FF9',
    columnWidthRatio: 0.4,
    columnStyle: { radius: [4, 4, 0, 0] },
    padding: 'auto',
    appendPadding: [40, 20, 30, 20],
    xAxis: {
        label: {
            autoRotate: false,
            style: { fontSize: 11, fill: '#646A73', textAlign: 'center' },
        },
        line: { style: { stroke: '#E5E6EB' } },
        tickLine: null,
    },
    yAxis: {
        label: {
            style: { fontSize: 11, fill: '#646A73' },
            formatter: (v) => v.toLocaleString(),
        },
        grid: { line: { style: { stroke: '#E5E6EB', lineDash: [4, 4] } } },
        line: null,
    },
    label: {
        position: 'top',
        style: { fontSize: 11, fill: '#5B8FF9' },
        formatter: (datum) => datum.value.toLocaleString(),
    },
    legend: false,
    interactions: [{ type: 'element-active' }],
}).render();

// 带标签柱状图
new Column('chart-label', {
    data: basicData,
    xField: 'region',
    yField: 'value',
    color: '#5AD8A6',
    columnWidthRatio: 0.5,
    columnStyle: { radius: [4, 4, 0, 0] },
    label: {
        position: 'top',
        style: { fill: '#5AD8A6', fontSize: 10 },
    },
    xAxis: { label: { style: { fontSize: 10, fill: '#646A73' } } },
}).render();

// 分组柱状图
const groupedData = [
    { region: '华东', type: '2023', value: 3650 },
    { region: '华东', type: '2024', value: 4200 },
    { region: '华北', type: '2023', value: 2808 },
    { region: '华北', type: '2024', value: 3100 },
    { region: '华南', type: '2023', value: 2408 },
    { region: '华南', type: '2024', value: 2800 },
];

new Column('chart-grouped', {
    data: groupedData,
    xField: 'region',
    yField: 'value',
    seriesField: 'type',
    isGroup: true,
    color: ['#5B8FF9', '#5AD8A6'],
    columnWidthRatio: 0.6,
    marginRatio: 0.25,
    columnStyle: { radius: [3, 3, 0, 0] },
    xAxis: { label: { style: { fontSize: 10, fill: '#646A73' } } },
    legend: { position: 'top-right', itemSpacing: 16 },
}).render();
</script>


<script src="../nav.js"></script>
</body>
</html>
