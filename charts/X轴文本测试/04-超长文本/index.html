<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¶…é•¿æ–‡å­—90åº¦+æˆªæ–­ - Xè½´æ–‡å­—ä¼˜åŒ–æ–¹æ¡ˆ</title>
    <script src="https://cdn.jsdelivr.net/npm/@antv/g2plot@2.4.31/dist/g2plot.min.js"></script>
    <link rel="stylesheet" href="../../common.css">
    <style>
        .scenario-badge {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: linear-gradient(135deg, #FFF1F0 0%, #FFCCC7 100%);
            padding: 8px 16px;
            border-radius: 20px;
            margin-bottom: 24px;
        }
        .scenario-badge .icon {
            width: 24px;
            height: 24px;
            background: var(--red);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 12px;
            font-weight: bold;
        }
        .scenario-badge .text {
            font-size: 14px;
            color: var(--red);
            font-weight: 500;
        }

        .key-point {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            background: #FFF1F0;
            color: var(--red);
            padding: 6px 12px;
            border-radius: 4px;
            font-size: 13px;
            margin: 4px;
        }
        .key-point::before {
            content: 'âœ“';
            font-weight: bold;
        }

        .angle-comparison {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin: 20px 0;
        }
        @media (max-width: 768px) {
            .angle-comparison { grid-template-columns: 1fr; }
        }
        .angle-box {
            background: #FAFBFC;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
            border: 1px solid var(--border);
        }
        .angle-box.active {
            border-color: var(--red);
            background: #FFF1F0;
        }
        .angle-visual {
            height: 80px;
            display: flex;
            align-items: flex-end;
            justify-content: center;
            margin-bottom: 12px;
        }
        .angle-text-45 {
            transform: rotate(-45deg);
            transform-origin: bottom right;
            font-size: 12px;
            color: var(--text-sub);
            white-space: nowrap;
        }
        .angle-text-90 {
            writing-mode: vertical-lr;
            transform: rotate(180deg);
            font-size: 12px;
            color: var(--red);
            font-weight: 500;
        }
        .angle-label {
            font-size: 14px;
            color: var(--text);
            font-weight: 600;
            margin-bottom: 4px;
        }
        .angle-value {
            font-size: 12px;
            color: var(--text-sub);
            font-family: 'SF Mono', monospace;
        }

        .truncate-demo {
            background: #FAFBFC;
            border-radius: 8px;
            padding: 24px;
            margin: 20px 0;
        }
        .truncate-example {
            display: flex;
            align-items: center;
            gap: 20px;
            margin: 12px 0;
            padding: 12px;
            background: white;
            border-radius: 6px;
            border: 1px solid var(--border);
        }
        .truncate-original {
            flex: 1;
            font-family: 'SF Mono', monospace;
            font-size: 12px;
            color: var(--text);
            word-break: break-all;
        }
        .truncate-arrow {
            color: var(--red);
            font-size: 20px;
            flex-shrink: 0;
        }
        .truncate-result {
            width: 100px;
            font-family: 'SF Mono', monospace;
            font-size: 12px;
            color: var(--red);
            font-weight: 600;
            flex-shrink: 0;
        }
        .truncate-length {
            background: #FFF1F0;
            color: var(--red);
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 11px;
            flex-shrink: 0;
        }

        .data-preview {
            background: #1F2329;
            border-radius: 6px;
            padding: 12px;
            font-family: 'SF Mono', monospace;
            font-size: 11px;
            color: #E6E8EB;
            overflow-x: auto;
        }

        .warning-box {
            background: #FFF7E6;
            border: 1px solid #FFE7BA;
            border-radius: 8px;
            padding: 16px;
            margin: 16px 0;
        }
        .warning-box-title {
            font-weight: 600;
            color: #D48806;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .warning-box-content {
            font-size: 13px;
            color: var(--text);
            line-height: 1.6;
        }
    </style>
</head>
<body>

<div class="page-header">
    <div class="scenario-badge">
        <span class="icon">4</span>
        <span class="text">åœºæ™¯å››ï¼šè¶…é•¿æ–‡å­—å‚ç›´æ˜¾ç¤º</span>
    </div>
    <h1>è¶…é•¿æ–‡å­— (â‰¥50å­—ç¬¦) - 90Â°å‚ç›´+æˆªæ–­</h1>
    <p class="subtitle">é€‚ç”¨äºè¶…é•¿æ ‡ç­¾å¦‚ï¼šMacBook Pro 16è‹±å¯¸ M3 Max é¡¶é…ç‰ˆï¼ˆå®šåˆ¶ç‰ˆ 96GB å†…å­˜ + 8TB SSDï¼‰</p>
    <div class="tech-stack">
        <span class="tech-tag">Ant Design Chart</span>
        <span class="tech-tag">G2Plot</span>
        <span class="tech-tag">rotate: -90Â° + truncate: 6</span>
    </div>
</div>

<!-- è§’åº¦å¯¹æ¯” -->
<div class="spec-section">
    <div class="spec-title">45Â° vs 90Â° è§’åº¦å¯¹æ¯”</div>
    
    <div class="angle-comparison">
        <div class="angle-box">
            <div class="angle-visual">
                <div class="angle-text-45">MacBook Pro 16...</div>
            </div>
            <div class="angle-label">45Â° å€¾æ–œ</div>
            <div class="angle-value">rotate: -Math.PI/4</div>
            <div style="margin-top: 8px; font-size: 12px; color: var(--text-sub);">
                é€‚ç”¨äºä¸€èˆ¬é•¿æ–‡å­— (9-50å­—ç¬¦)
            </div>
        </div>
        <div class="angle-box active">
            <div class="angle-visual">
                <div class="angle-text-90">MacBo...</div>
            </div>
            <div class="angle-label">90Â° å‚ç›´</div>
            <div class="angle-value">rotate: -Math.PI/2</div>
            <div style="margin-top: 8px; font-size: 12px; color: var(--red);">
                é€‚ç”¨äºè¶…é•¿æ–‡å­— (â‰¥50å­—ç¬¦)
            </div>
        </div>
    </div>

    <div class="warning-box">
        <div class="warning-box-title">âš ï¸ ä½•æ—¶ä½¿ç”¨90åº¦å‚ç›´ï¼Ÿ</div>
        <div class="warning-box-content">
            <p>å½“æ»¡è¶³ä»¥ä¸‹ä»»ä¸€æ¡ä»¶æ—¶ï¼š</p>
            <ul style="margin: 8px 0 0 20px;">
                <li>æœ€é•¿æ–‡å­— <b>â‰¥ 50 å­—ç¬¦</b></li>
                <li>æ•°æ®é¡¹æ•°é‡ <b>â‰¥ 15 é¡¹</b>ï¼ˆè§åœºæ™¯6ï¼‰</li>
            </ul>
            <p style="margin-top: 8px;">90åº¦å‚ç›´å¯ä»¥æœ€å¤§é™åº¦èŠ‚çœæ¨ªå‘ç©ºé—´ï¼Œä½†å¯è¯»æ€§ç•¥å·®äº45åº¦ã€‚</p>
        </div>
    </div>
</div>

<!-- æˆªæ–­æ¼”ç¤º -->
<div class="spec-section">
    <div class="spec-title">æˆªæ–­æ•ˆæœæ¼”ç¤ºï¼ˆæˆªæ–­åˆ°6å­—ç¬¦ï¼‰</div>
    
    <div class="truncate-demo">
        <div class="truncate-example">
            <div class="truncate-original">MacBook Pro 16è‹±å¯¸ M3 Max é¡¶é…ç‰ˆï¼ˆå®šåˆ¶ç‰ˆ 96GB å†…å­˜ + 8TB SSDï¼‰</div>
            <div class="truncate-length">50+å­—ç¬¦</div>
            <div class="truncate-arrow">â†’</div>
            <div class="truncate-result">MacBoo...</div>
        </div>
        <div class="truncate-example">
            <div class="truncate-original">iPhone 15 Pro Max é’›é‡‘å± 1TB è“è‰²ï¼ˆé¦–å‘é™é‡å®šåˆ¶ç‰ˆï¼‰</div>
            <div class="truncate-length">38å­—ç¬¦</div>
            <div class="truncate-arrow">â†’</div>
            <div class="truncate-result">iPhone...</div>
        </div>
        <div class="truncate-example">
            <div class="truncate-original">ç´¢å°¼ PlayStation 5 æœ€ç»ˆå¹»æƒ³16 è”åé™å®šçè—ç‰ˆä¸»æœºå¥—è£…</div>
            <div class="truncate-length">36å­—ç¬¦</div>
            <div class="truncate-arrow">â†’</div>
            <div class="truncate-result">ç´¢å°¼ Pl...</div>
        </div>
    </div>

    <div style="background: #E6F7F0; padding: 12px 16px; border-radius: 6px; font-size: 13px; color: #00A854;">
        ğŸ’¡ <b>90åº¦åœºæ™¯æˆªæ–­åˆ°6å­—ç¬¦</b>ï¼šæ¯”45åº¦åœºæ™¯å°‘2ä¸ªå­—ç¬¦ï¼Œå› ä¸ºå‚ç›´æ–‡å­—éœ€è¦æ›´ç´§å‡‘çš„æ˜¾ç¤ºã€‚
    </div>
</div>

<!-- è®¾è®¡è§„èŒƒè¯´æ˜ -->
<div class="spec-section">
    <div class="spec-title">è§¦å‘æ¡ä»¶</div>
    <table class="spec-table">
        <thead>
            <tr>
                <th style="width: 180px;">æ¡ä»¶</th>
                <th style="width: 150px;">é˜ˆå€¼</th>
                <th>è¯´æ˜</th>
            </tr>
        </thead>
        <tbody>
            <tr class="highlight">
                <td><b>æœ€å¤§æ–‡å­—é•¿åº¦</b></td>
                <td><code>â‰¥ 50</code></td>
                <td>å­—ç¬¦æ•°è¾¾åˆ°50å³è§¦å‘90åº¦</td>
            </tr>
            <tr>
                <td><b>æˆ– æ•°æ®é¡¹æ•°é‡</b></td>
                <td><code>â‰¥ 15</code></td>
                <td>æ•°æ®é¡¹å¤šä¹Ÿè§¦å‘90åº¦ï¼ˆè§åœºæ™¯6ï¼‰</td>
            </tr>
            <tr class="highlight">
                <td><b>æˆªæ–­å­—ç¬¦æ•°</b></td>
                <td><code>6</code></td>
                <td>æ¯”45åº¦åœºæ™¯å°‘2ä¸ªå­—ç¬¦</td>
            </tr>
        </tbody>
    </table>

    <div style="margin-top: 16px;">
        <span class="key-point">90åº¦å‚ç›´æ˜¾ç¤º</span>
        <span class="key-point">æˆªæ–­åˆ°6å­—ç¬¦</span>
        <span class="key-point">æœ€å¤§ç©ºé—´èŠ‚çœ</span>
        <span class="key-point">Tooltipå®Œæ•´æ˜¾ç¤º</span>
    </div>
</div>

<!-- æ ¸å¿ƒé…ç½®ä»£ç  -->
<div class="spec-section">
    <div class="spec-title">æ ¸å¿ƒé…ç½®ä»£ç </div>
    <div class="code-block">
<span class="comment">// è¶…é•¿æ–‡å­—åœºæ™¯é…ç½®ï¼ˆ90Â° + æˆªæ–­6å­—ç¬¦ï¼‰</span>
<span class="keyword">const</span> xAxisConfig = {
    label: {
        autoRotate: <span class="keyword">false</span>,
        rotate: -Math.PI / <span class="number">2</span>,          <span class="comment">// -90åº¦ï¼ˆå‚ç›´ï¼‰</span>
        formatter: (text) => {
            <span class="keyword">const</span> maxLength = <span class="number">6</span>;         <span class="comment">// æˆªæ–­åˆ°6å­—ç¬¦</span>
            <span class="keyword">if</span> (text.length > maxLength) {
                <span class="keyword">return</span> text.substring(<span class="number">0</span>, maxLength) + <span class="string">'...'</span>;
            }
            <span class="keyword">return</span> text;
        },
        style: {
            fontSize: <span class="number">11</span>,
            fill: <span class="string">'#646A73'</span>,
            textAlign: <span class="string">'end'</span>,         <span class="comment">// å‚ç›´æ—¶ä¹Ÿç”¨end</span>
        },
    },
};

<span class="comment">// åˆ¤æ–­å‡½æ•°</span>
<span class="keyword">function</span> <span class="function">shouldUse90Degree</span>(data, xField) {
    <span class="keyword">const</span> maxLen = Math.max(...data.map(d => String(d[xField]).length));
    <span class="keyword">return</span> maxLen >= <span class="number">50</span>;  <span class="comment">// å­—ç¬¦æ•° â‰¥ 50</span>
}
    </div>
</div>

<!-- å›¾è¡¨å±•ç¤º -->
<div class="chart-container">
    <div class="chart-card">
        <div class="chart-card-header">
            <span class="chart-title">äº§å“é”€é‡æ’è¡Œï¼ˆè¶…é•¿äº§å“åç§°ï¼‰</span>
            <span class="chart-tag red">rotate: -90Â° | truncate: 6</span>
        </div>
        <div class="chart-body lg">
            <div class="axis-unit y-left">ä¸‡å…ƒ</div>
            <div id="chart-main" style="width: 100%; height: 100%;"></div>
        </div>
        <div class="chart-summary">
            æ•°æ®é¡¹ï¼š<strong>5é¡¹</strong> | æœ€é•¿æ–‡å­—ï¼š<strong>50+å­—ç¬¦</strong> | æˆªæ–­é•¿åº¦ï¼š<strong>6å­—ç¬¦</strong> | æ—‹è½¬è§’åº¦ï¼š<strong>90Â°</strong>
        </div>
    </div>
</div>

<!-- é…ç½®å‚æ•°è¯¦è§£ -->
<div class="spec-section">
    <div class="spec-title">å®Œæ•´é…ç½®å‚æ•°</div>
    <table class="spec-table">
        <thead>
            <tr>
                <th style="width: 160px;">å‚æ•°</th>
                <th style="width: 140px;">å€¼</th>
                <th style="width: 100px;">ç±»å‹</th>
                <th>è¯´æ˜</th>
            </tr>
        </thead>
        <tbody>
            <tr class="highlight">
                <td><code>rotate</code></td>
                <td><code>-Math.PI/2</code></td>
                <td>number</td>
                <td>-90åº¦å‚ç›´æ—‹è½¬</td>
            </tr>
            <tr class="highlight">
                <td><code>formatter</code></td>
                <td><code>truncate(6)</code></td>
                <td>function</td>
                <td>æˆªæ–­åˆ°6å­—ç¬¦ï¼ˆæ¯”45Â°å°‘2ä¸ªï¼‰</td>
            </tr>
            <tr>
                <td><code>textAlign</code></td>
                <td><code>'end'</code></td>
                <td>string</td>
                <td>å‚ç›´æ—¶ä¹Ÿç”¨endå¯¹é½</td>
            </tr>
            <tr>
                <td><code>fontSize</code></td>
                <td><code>11</code></td>
                <td>number</td>
                <td>å­—ä½“å¤§å°</td>
            </tr>
        </tbody>
    </table>
</div>

<!-- 45Â° vs 90Â° å¯¹æ¯” -->
<div class="spec-section">
    <div class="spec-title">45Â° vs 90Â° è¯¦ç»†å¯¹æ¯”</div>
    <table class="spec-table">
        <thead>
            <tr>
                <th style="width: 150px;">å¯¹æ¯”é¡¹</th>
                <th>45Â° å€¾æ–œ</th>
                <th>90Â° å‚ç›´</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>rotateå€¼</td>
                <td><code>-Math.PI/4 â‰ˆ -0.785</code></td>
                <td><code>-Math.PI/2 â‰ˆ -1.571</code></td>
            </tr>
            <tr>
                <td>æˆªæ–­é•¿åº¦</td>
                <td>8 å­—ç¬¦</td>
                <td>6 å­—ç¬¦</td>
            </tr>
            <tr>
                <td>å¯è¯»æ€§</td>
                <td>â­â­â­â­ è¾ƒå¥½</td>
                <td>â­â­â­ ä¸€èˆ¬</td>
            </tr>
            <tr>
                <td>ç©ºé—´æ•ˆç‡</td>
                <td>â­â­â­ ä¸­ç­‰</td>
                <td>â­â­â­â­â­ æœ€é«˜</td>
            </tr>
            <tr>
                <td>é€‚ç”¨åœºæ™¯</td>
                <td>ä¸€èˆ¬é•¿æ–‡å­— (9-50å­—ç¬¦)</td>
                <td>è¶…é•¿æ–‡å­— (â‰¥50å­—ç¬¦) æˆ–å¤šæ•°æ®é¡¹ (â‰¥15)</td>
            </tr>
            <tr class="highlight">
                <td>Xè½´é«˜åº¦éœ€æ±‚</td>
                <td>~65px</td>
                <td>~90px</td>
            </tr>
        </tbody>
    </table>
</div>

<!-- è¾¹ç•Œæƒ…å†µ -->
<div class="spec-section">
    <div class="spec-title">è¾¹ç•Œæƒ…å†µå¤„ç†</div>
    <table class="spec-table">
        <thead>
            <tr>
                <th style="width: 200px;">æƒ…å†µ</th>
                <th style="width: 150px;">å¤„ç†æ–¹å¼</th>
                <th>è¯´æ˜</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>å­—ç¬¦æ•° = 49</td>
                <td>ä½¿ç”¨45Â° + æˆªæ–­8</td>
                <td>æœªè¾¾åˆ°50é˜ˆå€¼</td>
            </tr>
            <tr class="highlight">
                <td>å­—ç¬¦æ•° = 50</td>
                <td>ä½¿ç”¨90Â° + æˆªæ–­6</td>
                <td>åˆšå¥½è¾¾åˆ°é˜ˆå€¼</td>
            </tr>
            <tr>
                <td>å­—ç¬¦æ•° = 100+</td>
                <td>ä½¿ç”¨90Â° + æˆªæ–­6</td>
                <td>æ— è®ºå¤šé•¿éƒ½æˆªæ–­åˆ°6</td>
            </tr>
            <tr>
                <td>æ•°æ®é¡¹ â‰¥ 15</td>
                <td>ä¹Ÿä½¿ç”¨90Â°</td>
                <td>æ•°é‡å¤šæ—¶ä¹Ÿéœ€è¦å‚ç›´æ˜¾ç¤º</td>
            </tr>
        </tbody>
    </table>
</div>

<script>
const { Column } = G2Plot;

// è¶…é•¿æ–‡å­—æ•°æ®
const data = [
    { product: 'MacBook Pro 16è‹±å¯¸ M3 Max é¡¶é…ç‰ˆï¼ˆå®šåˆ¶ç‰ˆ 96GB å†…å­˜ + 8TB SSDï¼‰', value: 120000 },
    { product: 'iPhone 15 Pro Max é’›é‡‘å± 1TB è“è‰²ï¼ˆé¦–å‘é™é‡å®šåˆ¶ç‰ˆï¼‰', value: 72000 },
    { product: 'æˆ´å°” XPS 15 9530 å¼€å‘è€…ç‰¹åˆ«ç‰ˆï¼ˆé¢„è£… Ubuntu Linux ç³»ç»Ÿï¼‰', value: 35000 },
    { product: 'iPad Pro 12.9è‹±å¯¸ ç¬¬å…­ä»£ 2TB æ·±ç©ºç°è‰²ï¼ˆæ•™è‚²ä¼˜æƒ å¥—è£…ç‰ˆï¼‰', value: 29000 },
    { product: 'ç´¢å°¼ PlayStation 5 æœ€ç»ˆå¹»æƒ³16 è”åé™å®šçè—ç‰ˆä¸»æœºå¥—è£…', value: 19000 },
];

// æˆªæ–­å‡½æ•°
function truncate(text, maxLength = 6) {
    const str = String(text || '');
    if (str.length > maxLength) {
        return str.substring(0, maxLength) + '...';
    }
    return str;
}

// è¾“å‡ºä¿¡æ¯
const maxLen = Math.max(...data.map(d => d.product.length));
console.log('æœ€é•¿æ–‡å­—å­—ç¬¦æ•°:', maxLen);
console.log('è§¦å‘æ¡ä»¶:', maxLen >= 50 ? 'ä½¿ç”¨90åº¦' : 'ä½¿ç”¨45åº¦');
data.forEach(d => {
    console.log(`"${d.product.substring(0, 20)}..." (${d.product.length}å­—ç¬¦) â†’ "${truncate(d.product, 6)}"`);
});

new Column('chart-main', {
    data,
    xField: 'product',
    yField: 'value',
    color: '#E86452',
    columnWidthRatio: 0.5,
    columnStyle: {
        radius: [4, 4, 0, 0],
    },
    // æ ¸å¿ƒï¼šè¶…é•¿æ–‡å­—Xè½´é…ç½®
    xAxis: {
        label: {
            autoRotate: false,
            rotate: -Math.PI / 2,  // 90åº¦å‚ç›´
            formatter: (text) => truncate(text, 6),  // æˆªæ–­åˆ°6å­—ç¬¦
            style: {
                fontSize: 11,
                fill: '#646A73',
                textAlign: 'end',
            },
        },
    },
    yAxis: {
        label: {
            formatter: (v) => (v / 10000).toFixed(0) + 'ä¸‡',
        },
    },
    label: {
        position: 'top',
        style: {
            fill: '#E86452',
            fontSize: 11,
        },
        formatter: (datum) => (datum.value / 10000).toFixed(1) + 'ä¸‡',
    },
    // Tooltipæ˜¾ç¤ºå®Œæ•´æ–‡å­—
    tooltip: {
        formatter: (datum) => ({
            name: datum.product,  // å®Œæ•´äº§å“å
            value: datum.value.toLocaleString() + ' ä¸‡å…ƒ',
        }),
    },
}).render();
</script>


<script src="../../nav.js"></script>
</body>
</html>
